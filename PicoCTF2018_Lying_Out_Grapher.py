#!/usr/bin/env python

import datetime
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.dates as mdates

x_a = []
y_a = []

x_low = ['00.00', '02.00', '04.00', '06.00', '08.00', '10.00', '12.00', '14.00', '16.00', '18.00', '19.00', '20.00', '22.00', '23.00']
y_low = [2500,2500,3000,3000,10100,2500,11100,2500,2500,10000,7000,3000,2500, 2500]

x_max = ['00.00', '02.00', '04.00', '06.00', '08.00', '10.00', '12.00', '14.00', '16.00', '18.00', '19.00', '20.00', '22.00', '23.00']
y_max = [10800, 10800, 11000, 11000, 13600, 11000, 15900, 11000, 11000, 10800, 14000, 11200, 11000, 11000]

f = open("data.txt", "r")
content = f.readlines()

for line in content:
    formated = str(line)[12:]
    hour = str(formated).replace(":",".")[:5]
    events = str(formated).replace(" ","")[8:].replace("\n", "")
    x_a.append(hour)
    y_a.append(events)

print(x_a)
print(y_a)
print(x_low)
print(y_low)

time = [datetime.datetime.strptime(line,"%H.%M") for line in x_a]
time_low = [datetime.datetime.strptime(line,"%H.%M") for line in x_low] 
time1 = [mdates.date2num(line) for line in time]
time1_low = [mdates.date2num(line) for line in time_low]
event = [float(line) for line in y_a]
event_low = [float(line) for line in y_low]
event_max = [float(line) for line in y_max]

fig, ax = plt.subplots()

ax.set_title('IP Events')
ax.set_xlabel('Time')
ax.set_ylabel('IPs')
ax.plot_date(time1, event, 'k-', color='blue')
ax.plot_date(time1_low, event_low, 'k-', color='green')
ax.plot_date(time1_low, event_max, 'k-', color='red')

hfmt = mdates.DateFormatter('%H.%M')
ax.xaxis.set_major_formatter(hfmt)
plt.gcf().autofmt_xdate()

#plt.plot(time, event)

plt.show()
